# ============================================
# HelpInMinutes Staging Environment
# ============================================

# ============================================
# Docker Registry Configuration
# ============================================
DOCKER_REGISTRY=docker.io
IMAGE_TAG=staging

# ============================================
# Database Configuration (PostgreSQL + PostGIS)
# ============================================
POSTGRES_USER=him_staging_user
POSTGRES_PASSWORD=${POSTGRES_STAGING_PASSWORD}
POSTGRES_DB=helpinminutes_staging
POSTGRES_PORT=5432
POSTGRES_DATA_PATH=/data/postgres/staging
POSTGRES_CPU_LIMIT=1
POSTGRES_MEMORY_LIMIT=2G
POSTGRES_CPU_RESERVATION=0.5
POSTGRES_MEMORY_RESERVATION=1G

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_STAGING_PASSWORD}
REDIS_DATA_PATH=/data/redis/staging
REDIS_MAX_MEMORY=512mb
REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_RESERVATION=0.25
REDIS_MEMORY_RESERVATION=512M

# ============================================
# RabbitMQ Configuration
# ============================================
RABBITMQ_USER=him_staging
RABBITMQ_PASSWORD=${RABBITMQ_STAGING_PASSWORD}
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_STOMP_PORT=61613
RABBITMQ_ERLANG_COOKIE=staging-erlang-cookie-change-me
RABBITMQ_DATA_PATH=/data/rabbitmq/staging
RABBITMQ_CPU_LIMIT=0.5
RABBITMQ_MEMORY_LIMIT=1G
RABBITMQ_CPU_RESERVATION=0.25
RABBITMQ_MEMORY_RESERVATION=512M

# ============================================
# MinIO Configuration
# ============================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_CONSOLE_URL=http://localhost:9001
MINIO_DATA_PATH=/data/minio/staging
MINIO_CPU_LIMIT=0.5
MINIO_MEMORY_LIMIT=1G
MINIO_CPU_RESERVATION=0.25
MINIO_MEMORY_RESERVATION=512M

# ============================================
# JWT Configuration
# ============================================
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRATION=86400000
JWT_REFRESH_EXPIRATION=604800000

# ============================================
# Razorpay Configuration (Test Keys)
# ============================================
RAZORPAY_KEY_ID=${RAZORPAY_KEY_ID}
RAZORPAY_KEY_SECRET=${RAZORPAY_KEY_SECRET}
RAZORPAY_WEBHOOK_SECRET=${RAZORPAY_WEBHOOK_SECRET}

# ============================================
# Service Ports
# ============================================
IDENTITY_SERVICE_PORT=8081
TASK_SERVICE_PORT=8082
MATCHING_SERVICE_PORT=8083
PAYMENT_SERVICE_PORT=8084
REALTIME_SERVICE_PORT=8085
ADMIN_PORTAL_PORT=3000

# ============================================
# Service Replicas
# ============================================
IDENTITY_REPLICAS=1
TASK_REPLICAS=1
MATCHING_REPLICAS=1
PAYMENT_REPLICAS=1
REALTIME_REPLICAS=1
ADMIN_REPLICAS=1
NGINX_REPLICAS=1

# ============================================
# Service Resources
# ============================================
IDENTITY_CPU_LIMIT=0.75
IDENTITY_MEMORY_LIMIT=768M
IDENTITY_CPU_RESERVATION=0.5
IDENTITY_MEMORY_RESERVATION=384M

TASK_CPU_LIMIT=0.75
TASK_MEMORY_LIMIT=768M
TASK_CPU_RESERVATION=0.5
TASK_MEMORY_RESERVATION=384M

MATCHING_CPU_LIMIT=0.75
MATCHING_MEMORY_LIMIT=768M
MATCHING_CPU_RESERVATION=0.5
MATCHING_MEMORY_RESERVATION=384M

PAYMENT_CPU_LIMIT=0.75
PAYMENT_MEMORY_LIMIT=768M
PAYMENT_CPU_RESERVATION=0.5
PAYMENT_MEMORY_RESERVATION=384M

REALTIME_CPU_LIMIT=0.75
REALTIME_MEMORY_LIMIT=768M
REALTIME_CPU_RESERVATION=0.5
REALTIME_MEMORY_RESERVATION=384M

ADMIN_CPU_LIMIT=0.5
ADMIN_MEMORY_LIMIT=512M
ADMIN_CPU_RESERVATION=0.25
ADMIN_MEMORY_RESERVATION=256M

NGINX_CPU_LIMIT=0.5
NGINX_MEMORY_LIMIT=256M
NGINX_CPU_RESERVATION=0.25
NGINX_MEMORY_RESERVATION=128M

# ============================================
# Application Configuration
# ============================================
APP_NAME=HelpInMinutes-Staging
APP_ENV=staging
APP_DEBUG=true
LOG_LEVEL=DEBUG

# ============================================
# API URLs
# ============================================
API_URL=http://localhost:8080/api
WS_URL=ws://localhost:8080/ws

# ============================================
# Nginx Ports
# ============================================
HTTP_PORT=8080
HTTPS_PORT=8443

# ============================================
# Monitoring Ports
# ============================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
JAEGER_COLLECTOR_PORT=14268
JAEGER_QUERY_PORT=16686
JAEGER_AGENT_PORT=6831
JAEGER_ZIPKIN_PORT=9411
ALERTMANAGER_PORT=9093
LOKI_PORT=3100

# ============================================
# Monitoring Resources
# ============================================
PROMETHEUS_CPU_LIMIT=0.5
PROMETHEUS_MEMORY_LIMIT=1G
PROMETHEUS_DATA_PATH=/data/prometheus
PROMETHEUS_CPU_RESERVATION=0.25
PROMETHEUS_MEMORY_RESERVATION=512M

GRAFANA_CPU_LIMIT=0.5
GRAFANA_MEMORY_LIMIT=512M
GRAFANA_DATA_PATH=/data/grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=staging123
GRAFANA_CPU_RESERVATION=0.25
GRAFANA_MEMORY_RESERVATION=256M

JAEGER_CPU_LIMIT=0.5
JAEGER_MEMORY_LIMIT=1G
JAEGER_CPU_RESERVATION=0.25
JAEGER_MEMORY_RESERVATION=512M

ALERTMANAGER_CPU_LIMIT=0.25
ALERTMANAGER_MEMORY_LIMIT=256M
ALERTMANAGER_CPU_RESERVATION=0.125
ALERTMANAGER_MEMORY_RESERVATION=128M

LOKI_CPU_LIMIT=0.5
LOKI_MEMORY_LIMIT=512M
LOKI_DATA_PATH=/data/loki
LOKI_CPU_RESERVATION=0.25
LOKI_MEMORY_RESERVATION=256M

FLUENTBIT_CPU_LIMIT=0.25
FLUENTBIT_MEMORY_LIMIT=128M
FLUENTBIT_CPU_RESERVATION=0.125
FLUENTBIT_MEMORY_RESERVATION=64M

# ============================================
# Backup Configuration
# ============================================
BACKUP_PATH=/backups/staging
BACKUP_SCHEDULE=0 3 * * 0
RETENTION_DAYS=7

AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET=him-backups-staging
AWS_REGION=ap-south-1

BACKUP_CPU_LIMIT=0.25
BACKUP_MEMORY_LIMIT=256M
BACKUP_CPU_RESERVATION=0.125
BACKUP_MEMORY_RESERVATION=128M

# ============================================
# Push Notifications (Firebase)
# ============================================
FIREBASE_SERVICE_ACCOUNT_KEY_PATH=/secrets/firebase-service-account.json

# ============================================
# SMS Configuration (Twilio)
# ============================================
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${TWILIO_PHONE_NUMBER}

# ============================================
# Google OAuth
# ============================================
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

# ============================================
# Security Settings
# ============================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_WINDOW_MS=60000
