# ============================================
# HelpInMinutes Production Environment
# ============================================

# ============================================
# Docker Registry Configuration
# ============================================
DOCKER_REGISTRY=docker.io
IMAGE_TAG=latest

# ============================================
# Database Configuration (PostgreSQL + PostGIS)
# ============================================
POSTGRES_USER=him_prod_user
POSTGRES_PASSWORD=${POSTGRES_PROD_PASSWORD}
POSTGRES_DB=helpinminutes_prod
POSTGRES_PORT=5432
POSTGRES_DATA_PATH=/data/postgres/prod
POSTGRES_CPU_LIMIT=2
POSTGRES_MEMORY_LIMIT=4G
POSTGRES_CPU_RESERVATION=1
POSTGRES_MEMORY_RESERVATION=2G

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PROD_PASSWORD}
REDIS_DATA_PATH=/data/redis/prod
REDIS_MAX_MEMORY=1gb
REDIS_CPU_LIMIT=1
REDIS_MEMORY_LIMIT=2G
REDIS_CPU_RESERVATION=0.5
REDIS_MEMORY_RESERVATION=1G

# ============================================
# RabbitMQ Configuration
# ============================================
RABBITMQ_USER=him_prod
RABBITMQ_PASSWORD=${RABBITMQ_PROD_PASSWORD}
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_STOMP_PORT=61613
RABBITMQ_ERLANG_COOKIE=${RABBITMQ_ERLANG_COOKIE}
RABBITMQ_DATA_PATH=/data/rabbitmq/prod
RABBITMQ_CPU_LIMIT=1
RABBITMQ_MEMORY_LIMIT=2G
RABBITMQ_CPU_RESERVATION=0.5
RABBITMQ_MEMORY_RESERVATION=1G

# ============================================
# MinIO Configuration
# ============================================
MINIO_ROOT_USER=${MINIO_ROOT_USER}
MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_CONSOLE_URL=https://console.helpinminutes.com
MINIO_DATA_PATH=/data/minio/prod
MINIO_CPU_LIMIT=1
MINIO_MEMORY_LIMIT=2G
MINIO_CPU_RESERVATION=0.5
MINIO_MEMORY_RESERVATION=1G

# ============================================
# JWT Configuration
# ============================================
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRATION=86400000
JWT_REFRESH_EXPIRATION=604800000

# ============================================
# Razorpay Configuration
# ============================================
RAZORPAY_KEY_ID=${RAZORPAY_KEY_ID}
RAZORPAY_KEY_SECRET=${RAZORPAY_KEY_SECRET}
RAZORPAY_WEBHOOK_SECRET=${RAZORPAY_WEBHOOK_SECRET}

# ============================================
# Service Ports
# ============================================
IDENTITY_SERVICE_PORT=8081
TASK_SERVICE_PORT=8082
MATCHING_SERVICE_PORT=8083
PAYMENT_SERVICE_PORT=8084
REALTIME_SERVICE_PORT=8085
ADMIN_PORTAL_PORT=3000

# ============================================
# Service Replicas
# ============================================
IDENTITY_REPLICAS=2
TASK_REPLICAS=2
MATCHING_REPLICAS=2
PAYMENT_REPLICAS=2
REALTIME_REPLICAS=3
ADMIN_REPLICAS=2
NGINX_REPLICAS=2

# ============================================
# Service Resources
# ============================================
IDENTITY_CPU_LIMIT=1
IDENTITY_MEMORY_LIMIT=1G
IDENTITY_CPU_RESERVATION=0.5
IDENTITY_MEMORY_RESERVATION=512M

TASK_CPU_LIMIT=1
TASK_MEMORY_LIMIT=1G
TASK_CPU_RESERVATION=0.5
TASK_MEMORY_RESERVATION=512M

MATCHING_CPU_LIMIT=1
MATCHING_MEMORY_LIMIT=1G
MATCHING_CPU_RESERVATION=0.5
MATCHING_MEMORY_RESERVATION=512M

PAYMENT_CPU_LIMIT=1
PAYMENT_MEMORY_LIMIT=1G
PAYMENT_CPU_RESERVATION=0.5
PAYMENT_MEMORY_RESERVATION=512M

REALTIME_CPU_LIMIT=1
REALTIME_MEMORY_LIMIT=1G
REALTIME_CPU_RESERVATION=0.5
REALTIME_MEMORY_RESERVATION=512M

ADMIN_CPU_LIMIT=1
ADMIN_MEMORY_LIMIT=1G
ADMIN_CPU_RESERVATION=0.5
ADMIN_MEMORY_RESERVATION=512M

NGINX_CPU_LIMIT=1
NGINX_MEMORY_LIMIT=512M
NGINX_CPU_RESERVATION=0.25
NGINX_MEMORY_RESERVATION=256M

# ============================================
# Application Configuration
# ============================================
APP_NAME=HelpInMinutes
APP_ENV=production
APP_DEBUG=false
LOG_LEVEL=WARN

# ============================================
# API URLs
# ============================================
API_URL=https://api.helpinminutes.com
WS_URL=wss://ws.helpinminutes.com

# ============================================
# Nginx Ports
# ============================================
HTTP_PORT=80
HTTPS_PORT=443

# ============================================
# Monitoring Ports
# ============================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
JAEGER_COLLECTOR_PORT=14268
JAEGER_QUERY_PORT=16686
JAEGER_AGENT_PORT=6831
JAEGER_ZIPKIN_PORT=9411
ALERTMANAGER_PORT=9093
LOKI_PORT=3100

# ============================================
# Monitoring Resources
# ============================================
PROMETHEUS_CPU_LIMIT=1
PROMETHEUS_MEMORY_LIMIT=2G
PROMETHEUS_DATA_PATH=/data/prometheus
PROMETHEUS_CPU_RESERVATION=0.5
PROMETHEUS_MEMORY_RESERVATION=1G

GRAFANA_CPU_LIMIT=1
GRAFANA_MEMORY_LIMIT=1G
GRAFANA_DATA_PATH=/data/grafana
GRAFANA_ADMIN_USER=${GRAFANA_ADMIN_USER}
GRAFANA_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD}
GRAFANA_CPU_RESERVATION=0.5
GRAFANA_MEMORY_RESERVATION=512M

JAEGER_CPU_LIMIT=1
JAEGER_MEMORY_LIMIT=2G
JAEGER_CPU_RESERVATION=0.5
JAEGER_MEMORY_RESERVATION=1G

ALERTMANAGER_CPU_LIMIT=0.5
ALERTMANAGER_MEMORY_LIMIT=512M
ALERTMANAGER_CPU_RESERVATION=0.25
ALERTMANAGER_MEMORY_RESERVATION=256M

LOKI_CPU_LIMIT=1
LOKI_MEMORY_LIMIT=1G
LOKI_DATA_PATH=/data/loki
LOKI_CPU_RESERVATION=0.5
LOKI_MEMORY_RESERVATION=512M

FLUENTBIT_CPU_LIMIT=0.5
FLUENTBIT_MEMORY_LIMIT=256M
FLUENTBIT_CPU_RESERATION=0.25
FLUENTBIT_MEMORY_RESERVATION=128M

# ============================================
# Backup Configuration
# ============================================
BACKUP_PATH=/backups/prod
BACKUP_SCHEDULE=0 2 * * *
RETENTION_DAYS=30

AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET=him-backups-prod
AWS_REGION=ap-south-1

BACKUP_CPU_LIMIT=0.5
BACKUP_MEMORY_LIMIT=512M
BACKUP_CPU_RESERVATION=0.25
BACKUP_MEMORY_RESERVATION=256M

# ============================================
# Push Notifications (Firebase)
# ============================================
FIREBASE_SERVICE_ACCOUNT_KEY_PATH=/secrets/firebase-service-account.json

# ============================================
# SMS Configuration (Twilio)
# ============================================
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${TWILIO_PHONE_NUMBER}

# ============================================
# Google OAuth
# ============================================
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

# ============================================
# Security Settings
# ============================================
CORS_ALLOWED_ORIGINS=https://helpinminutes.com,https://admin.helpinminutes.com
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000
