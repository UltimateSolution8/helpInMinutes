## HelpInMinutes RabbitMQ Configuration
## This file configures RabbitMQ for the microservices architecture

# Default guest/guest user disabled for production
loopback_users = none

# Enable management plugin
management.load_definitions = /etc/rabbitmq/definitions.json

# Clustering configuration
cluster_formation.peer_discovery_backend = classic_config
cluster_formation.classic_config.nodes.1 = rabbit@helpinminutes-rabbitmq

# Message store settings
queue_index_max_journal_entries = 50000

# TCP listener configuration
listeners.tcp.default = 5672

# Management listener
management.listener.port = 15672

# SSL configuration (disabled by default)
# ssl.listeners.tcp.default = 5671
# management.listener.ssl = false

# Heartbeat settings
heartbeat.default = 60

# Connection negotiation
handshake_timeout = 10

# Channel max
channel_max = 2047

# Memory limits
vm_memory_high_watermark.absolute = 1GB
vm_memory_high_watermark_paging_ratio = 0.5

# Disk space limits
disk_free_limit.absolute = 5GB

# Flow control
flow_control.scale = 1000

# Logging
log.file = /var/log/rabbitmq/rabbit.log
log.console = true
log.level = info

# Metrics collection
collect_statistics = interval
collect_statistics_interval = 5000

# Lazy queues for large message storage
# lazy_queues_explicitly_enabled = true

# Background GC
background_gc_enabled = true
background_gc_target_interval = 60000
